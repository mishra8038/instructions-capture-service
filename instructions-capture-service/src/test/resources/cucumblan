Feature: Kafka message communication

  Scenario: Send and receive a trade instruction
    Given a Kafka topic named "instructions.inbound"
    When I send the following message to the topic
      """
      {
        "platform_id": "ACCT123",
        "trade": {
          "account": "9876543210",
          "security": "ABC1234",
          "type": "B",
          "amount": 100000,
          "timestamp": "2025-08-04T21:15:33Z"
        }
      }
      """
    Then I should receive a message on topic "instructions.outbound" within 5 seconds matching:
      """
      {
        "status": "RECEIVED",
        "platform_id": "ACCT123"
      }
      """
